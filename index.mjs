!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";
/**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */const t=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,e=Symbol();class i{constructor(t,i){if(i!==e)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return t&&void 0===this.t&&(this.t=new CSSStyleSheet,this.t.replaceSync(this.cssText)),this.t}toString(){return this.cssText}}const n=new Map,s=t=>{let s=n.get(t);return void 0===s&&n.set(t,s=new i(t,e)),s},r=(t,...e)=>{const n=1===t.length?t[0]:e.reduce(((e,n,s)=>e+(t=>{if(t instanceof i)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1]),t[0]);return s(n)},o=t?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return(t=>s("string"==typeof t?t:t+""))(e)})(t):t
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */;var a,l,c,d;const h={toAttribute(t,e){switch(e){case Boolean:t=t?"":null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},u=(t,e)=>e!==t&&(e==e||t==t),p={attribute:!0,type:String,converter:h,reflect:!1,hasChanged:u};class g extends HTMLElement{constructor(){super(),this.Πi=new Map,this.Πo=void 0,this.Πl=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this.Πh=null,this.u()}static addInitializer(t){var e;null!==(e=this.v)&&void 0!==e||(this.v=[]),this.v.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,i)=>{const n=this.Πp(i,e);void 0!==n&&(this.Πm.set(n,i),t.push(n))})),t}static createProperty(t,e=p){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const i="symbol"==typeof t?Symbol():"__"+t,n=this.getPropertyDescriptor(t,i,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(n){const s=this[t];this[e]=n,this.requestUpdate(t,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||p}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this.Πm=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const i of e)this.createProperty(i,t[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(o(t))}else void 0!==t&&e.push(o(t));return e}static"Πp"(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this.Πg=new Promise((t=>this.enableUpdating=t)),this.L=new Map,this.Π_(),this.requestUpdate(),null===(t=this.constructor.v)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,i;(null!==(e=this.ΠU)&&void 0!==e?e:this.ΠU=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(i=t.hostConnected)||void 0===i||i.call(t))}removeController(t){var e;null===(e=this.ΠU)||void 0===e||e.splice(this.ΠU.indexOf(t)>>>0,1)}"Π_"(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this.Πi.set(e,this[e]),delete this[e])}))}createRenderRoot(){var e;const i=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,i)=>{t?e.adoptedStyleSheets=i.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):i.forEach((t=>{const i=document.createElement("style");i.textContent=t.cssText,e.appendChild(i)}))})(i,this.constructor.elementStyles),i}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this.ΠU)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)})),this.Πl&&(this.Πl(),this.Πo=this.Πl=void 0)}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this.ΠU)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)})),this.Πo=new Promise((t=>this.Πl=t))}attributeChangedCallback(t,e,i){this.K(t,i)}"Πj"(t,e,i=p){var n,s;const r=this.constructor.Πp(t,i);if(void 0!==r&&!0===i.reflect){const o=(null!==(s=null===(n=i.converter)||void 0===n?void 0:n.toAttribute)&&void 0!==s?s:h.toAttribute)(e,i.type);this.Πh=t,null==o?this.removeAttribute(r):this.setAttribute(r,o),this.Πh=null}}K(t,e){var i,n,s;const r=this.constructor,o=r.Πm.get(t);if(void 0!==o&&this.Πh!==o){const t=r.getPropertyOptions(o),a=t.converter,l=null!==(s=null!==(n=null===(i=a)||void 0===i?void 0:i.fromAttribute)&&void 0!==n?n:"function"==typeof a?a:null)&&void 0!==s?s:h.fromAttribute;this.Πh=o,this[o]=l(e,t.type),this.Πh=null}}requestUpdate(t,e,i){let n=!0;void 0!==t&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||u)(this[t],e)?(this.L.has(t)||this.L.set(t,e),!0===i.reflect&&this.Πh!==t&&(void 0===this.Πk&&(this.Πk=new Map),this.Πk.set(t,i))):n=!1),!this.isUpdatePending&&n&&(this.Πg=this.Πq())}async"Πq"(){this.isUpdatePending=!0;try{for(await this.Πg;this.Πo;)await this.Πo}catch(t){Promise.reject(t)}const t=this.performUpdate();return null!=t&&await t,!this.isUpdatePending}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this.Πi&&(this.Πi.forEach(((t,e)=>this[e]=t)),this.Πi=void 0);let e=!1;const i=this.L;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),null===(t=this.ΠU)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(i)):this.Π$()}catch(t){throw e=!1,this.Π$(),t}e&&this.E(i)}willUpdate(t){}E(t){var e;null===(e=this.ΠU)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}"Π$"(){this.L=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this.Πg}shouldUpdate(t){return!0}update(t){void 0!==this.Πk&&(this.Πk.forEach(((t,e)=>this.Πj(e,this[e],t))),this.Πk=void 0),this.Π$()}updated(t){}firstUpdated(t){}}
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
var f,v,m,b;g.finalized=!0,g.elementProperties=new Map,g.elementStyles=[],g.shadowRootOptions={mode:"open"},null===(l=(a=globalThis).reactiveElementPlatformSupport)||void 0===l||l.call(a,{ReactiveElement:g}),(null!==(c=(d=globalThis).reactiveElementVersions)&&void 0!==c?c:d.reactiveElementVersions=[]).push("1.0.0-rc.2");const y=globalThis.trustedTypes,x=y?y.createPolicy("lit-html",{createHTML:t=>t}):void 0,w=`lit$${(Math.random()+"").slice(9)}$`,k="?"+w,S=`<${k}>`,A=document,$=(t="")=>A.createComment(t),C=t=>null===t||"object"!=typeof t&&"function"!=typeof t,F=Array.isArray,E=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,T=/-->/g,_=/>/g,P=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,z=/'/g,O=/"/g,U=/^(?:script|style|textarea)$/i,H=(t=>(e,...i)=>({_$litType$:t,strings:e,values:i}))(1),R=Symbol.for("lit-noChange"),N=Symbol.for("lit-nothing"),j=new WeakMap,L=A.createTreeWalker(A,129,null,!1);class I{constructor({strings:t,_$litType$:e},i){let n;this.parts=[];let s=0,r=0;const o=t.length-1,a=this.parts,[l,c]=((t,e)=>{const i=t.length-1,n=[];let s,r=2===e?"<svg>":"",o=E;for(let e=0;e<i;e++){const i=t[e];let a,l,c=-1,d=0;for(;d<i.length&&(o.lastIndex=d,l=o.exec(i),null!==l);)d=o.lastIndex,o===E?"!--"===l[1]?o=T:void 0!==l[1]?o=_:void 0!==l[2]?(U.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=P):void 0!==l[3]&&(o=P):o===P?">"===l[0]?(o=null!=s?s:E,c=-1):void 0===l[1]?c=-2:(c=o.lastIndex-l[2].length,a=l[1],o=void 0===l[3]?P:'"'===l[3]?O:z):o===O||o===z?o=P:o===T||o===_?o=E:(o=P,s=void 0);const h=o===P&&t[e+1].startsWith("/>")?" ":"";r+=o===E?i+S:c>=0?(n.push(a),i.slice(0,c)+"$lit$"+i.slice(c)+w+h):i+w+(-2===c?(n.push(void 0),e):h)}const a=r+(t[i]||"<?>")+(2===e?"</svg>":"");return[void 0!==x?x.createHTML(a):a,n]})(t,e);if(this.el=I.createElement(l,i),L.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(n=L.nextNode())&&a.length<o;){if(1===n.nodeType){if(n.hasAttributes()){const t=[];for(const e of n.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(w)){const i=c[r++];if(t.push(e),void 0!==i){const t=n.getAttribute(i.toLowerCase()+"$lit$").split(w),e=/([.?@])?(.*)/.exec(i);a.push({type:1,index:s,name:e[2],strings:t,ctor:"."===e[1]?q:"?"===e[1]?V:"@"===e[1]?Z:W})}else a.push({type:6,index:s})}for(const e of t)n.removeAttribute(e)}if(U.test(n.tagName)){const t=n.textContent.split(w),e=t.length-1;if(e>0){n.textContent=y?y.emptyScript:"";for(let i=0;i<e;i++)n.append(t[i],$()),L.nextNode(),a.push({type:2,index:++s});n.append(t[e],$())}}}else if(8===n.nodeType)if(n.data===k)a.push({type:2,index:s});else{let t=-1;for(;-1!==(t=n.data.indexOf(w,t+1));)a.push({type:7,index:s}),t+=w.length-1}s++}}static createElement(t,e){const i=A.createElement("template");return i.innerHTML=t,i}}function B(t,e,i=t,n){var s,r,o,a;if(e===R)return e;let l=void 0!==n?null===(s=i.Σi)||void 0===s?void 0:s[n]:i.Σo;const c=C(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(r=null==l?void 0:l.O)||void 0===r||r.call(l,!1),void 0===c?l=void 0:(l=new c(t),l.T(t,i,n)),void 0!==n?(null!==(o=(a=i).Σi)&&void 0!==o?o:a.Σi=[])[n]=l:i.Σo=l),void 0!==l&&(e=B(t,l.S(t,e.values),l,n)),e}class D{constructor(t,e){this.l=[],this.N=void 0,this.D=t,this.M=e}u(t){var e;const{el:{content:i},parts:n}=this.D,s=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:A).importNode(i,!0);L.currentNode=s;let r=L.nextNode(),o=0,a=0,l=n[0];for(;void 0!==l;){if(o===l.index){let e;2===l.type?e=new M(r,r.nextSibling,this,t):1===l.type?e=new l.ctor(r,l.name,l.strings,this,t):6===l.type&&(e=new K(r,this,t)),this.l.push(e),l=n[++a]}o!==(null==l?void 0:l.index)&&(r=L.nextNode(),o++)}return s}v(t){let e=0;for(const i of this.l)void 0!==i&&(void 0!==i.strings?(i.I(t,i,e),e+=i.strings.length-2):i.I(t[e])),e++}}class M{constructor(t,e,i,n){this.type=2,this.N=void 0,this.A=t,this.B=e,this.M=i,this.options=n}setConnected(t){var e;null===(e=this.P)||void 0===e||e.call(this,t)}get parentNode(){return this.A.parentNode}get startNode(){return this.A}get endNode(){return this.B}I(t,e=this){t=B(this,t,e),C(t)?t===N||null==t||""===t?(this.H!==N&&this.R(),this.H=N):t!==this.H&&t!==R&&this.m(t):void 0!==t._$litType$?this._(t):void 0!==t.nodeType?this.$(t):(t=>{var e;return F(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])})(t)?this.g(t):this.m(t)}k(t,e=this.B){return this.A.parentNode.insertBefore(t,e)}$(t){this.H!==t&&(this.R(),this.H=this.k(t))}m(t){const e=this.A.nextSibling;null!==e&&3===e.nodeType&&(null===this.B?null===e.nextSibling:e===this.B.previousSibling)?e.data=t:this.$(A.createTextNode(t)),this.H=t}_(t){var e;const{values:i,_$litType$:n}=t,s="number"==typeof n?this.C(t):(void 0===n.el&&(n.el=I.createElement(n.h,this.options)),n);if((null===(e=this.H)||void 0===e?void 0:e.D)===s)this.H.v(i);else{const t=new D(s,this),e=t.u(this.options);t.v(i),this.$(e),this.H=t}}C(t){let e=j.get(t.strings);return void 0===e&&j.set(t.strings,e=new I(t)),e}g(t){F(this.H)||(this.H=[],this.R());const e=this.H;let i,n=0;for(const s of t)n===e.length?e.push(i=new M(this.k($()),this.k($()),this,this.options)):i=e[n],i.I(s),n++;n<e.length&&(this.R(i&&i.B.nextSibling,n),e.length=n)}R(t=this.A.nextSibling,e){var i;for(null===(i=this.P)||void 0===i||i.call(this,!1,!0,e);t&&t!==this.B;){const e=t.nextSibling;t.remove(),t=e}}}class W{constructor(t,e,i,n,s){this.type=1,this.H=N,this.N=void 0,this.V=void 0,this.element=t,this.name=e,this.M=n,this.options=s,i.length>2||""!==i[0]||""!==i[1]?(this.H=Array(i.length-1).fill(N),this.strings=i):this.H=N}get tagName(){return this.element.tagName}I(t,e=this,i,n){const s=this.strings;let r=!1;if(void 0===s)t=B(this,t,e,0),r=!C(t)||t!==this.H&&t!==R,r&&(this.H=t);else{const n=t;let o,a;for(t=s[0],o=0;o<s.length-1;o++)a=B(this,n[i+o],e,o),a===R&&(a=this.H[o]),r||(r=!C(a)||a!==this.H[o]),a===N?t=N:t!==N&&(t+=(null!=a?a:"")+s[o+1]),this.H[o]=a}r&&!n&&this.W(t)}W(t){t===N?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class q extends W{constructor(){super(...arguments),this.type=3}W(t){this.element[this.name]=t===N?void 0:t}}class V extends W{constructor(){super(...arguments),this.type=4}W(t){t&&t!==N?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}}class Z extends W{constructor(){super(...arguments),this.type=5}I(t,e=this){var i;if((t=null!==(i=B(this,t,e,0))&&void 0!==i?i:N)===R)return;const n=this.H,s=t===N&&n!==N||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,r=t!==N&&(n===N||s);s&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,t),this.H=t}handleEvent(t){var e,i;"function"==typeof this.H?this.H.call(null!==(i=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==i?i:this.element,t):this.H.handleEvent(t)}}class K{constructor(t,e,i){this.element=t,this.type=6,this.N=void 0,this.V=void 0,this.M=e,this.options=i}I(t){B(this,t)}}
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
var J,G,X,Y,Q,tt;null===(v=(f=globalThis).litHtmlPlatformSupport)||void 0===v||v.call(f,I,M),(null!==(m=(b=globalThis).litHtmlVersions)&&void 0!==m?m:b.litHtmlVersions=[]).push("2.0.0-rc.3"),(null!==(J=(tt=globalThis).litElementVersions)&&void 0!==J?J:tt.litElementVersions=[]).push("3.0.0-rc.2");class et extends g{constructor(){super(...arguments),this.renderOptions={host:this},this.Φt=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const e=this.render();super.update(t),this.Φt=((t,e,i)=>{var n,s;const r=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:e;let o=r._$litPart$;if(void 0===o){const t=null!==(s=null==i?void 0:i.renderBefore)&&void 0!==s?s:null;r._$litPart$=o=new M(e.insertBefore($(),t),t,void 0,i)}return o.I(t),o})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this.Φt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this.Φt)||void 0===t||t.setConnected(!1)}render(){return R}}et.finalized=!0,et._$litElement$=!0,null===(X=(G=globalThis).litElementHydrateSupport)||void 0===X||X.call(G,{LitElement:et}),null===(Q=(Y=globalThis).litElementPlatformSupport)||void 0===Q||Q.call(Y,{LitElement:et});var it=r`:host{display:grid;grid-template-columns:300px auto;grid-template-rows:80px auto;width:100%;max-width:800px;height:500px;max-height:500px;margin:70px auto 0;grid-gap:10px;gap:10px}#editor-wrap{grid-row:1/3;width:100%;height:100%;max-height:inherit;position:relative}#editor-wrap>#current-rule{position:absolute;left:0;top:12px;width:95%;height:20px;opacity:.2;z-index:-1}#editor-wrap #editor[running]+#current-rule{background-color:green;z-index:4}#editor-wrap #editor[completed]+#current-rule{background-color:red;z-index:4}#editor{max-height:inherit;grid-row:1/3;position:relative;width:100%;height:100%;border:2px solid var(--color-border);border-radius:8px;border-left:none;box-sizing:border-box;background-color:var(--color-bg-input);--editor-bg-color:var(--color-bg-input);--editor-text-color:var(--color-text);--lines-bg-color:var(--color-bg-light);--lines-text-color:var(--color-text-secondary);--hl-color-operator:#d00;--line-height:20px}#editor:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#ddd;z-index:-1;border-radius:inherit;opacity:0;transition:opacity .2s}#editor[running]:before{opacity:0;z-index:4;cursor:not-allowed}#controls #string{box-sizing:border-box;width:100%;padding:4px 8px;border:2px solid var(--color-border);border-radius:8px;outline:none;transition:.2s;font:inherit;background-color:var(--color-bg-input);color:var(--color-text)}#controls #string[disabled]{cursor:not-allowed}#controls #buttons{margin-top:.8em;display:flex;width:100%;justify-content:space-between}#controls #buttons button#step{background-color:#ffe279;border-color:#dfc66e}#controls #buttons button#play{background-color:#b8f39a;border-color:#9fd585}#controls #buttons button#reset{background-color:#ffb2b2;border-color:#d38c8c}#controls #buttons button{border:2px solid var(--color-border);background-color:transparent;border-radius:8px;font-size:1.3em;width:4em;cursor:pointer;transition:.2s}#controls #buttons button:hover{filter:brightness(1.1)}#history[completed]{padding-top:calc(var(--line-height)*2)}#history{grid-column:2;--line-height:15pt;display:grid;grid-template-columns:40px auto;grid-template-rows:repeat(auto-fill,var(--line-height));grid-column-gap:2px;-moz-column-gap:2px;column-gap:2px;width:100%;height:100%;position:relative;border-radius:8px;border:2px solid var(--color-border);box-sizing:border-box;background-color:var(--color-bg-input);overflow:auto}#history:after{z-index:0;content:"";position:absolute;top:0;left:0;width:40px;height:100%;background-color:var(--color-bg-light);border-radius:8px 0 0 8px}#history[completed]:after{top:calc(var(--line-height)*2);height:calc(100% - var(--line-height)*2)}#history>#terminated{position:absolute;top:0;left:0;width:100%;height:calc(var(--line-height)*2);display:none;align-items:center;justify-content:center;background-color:rgba(255,0,0,.18823529411764706);font-size:1.2em;color:#970000}#history[completed]>#terminated{display:flex}#history :is(.line,.rule){font-size:12pt;color:var(--color-text)}#history>:is(.line){text-align:right;padding-right:8px}#history>:is(.line,.empty-line){background-color:var(--color-bg-light);z-index:1}#history>.rule{position:relative}#history>.rule>hr{position:absolute;border:none;margin:0;background:#c7c7c7;width:100%;height:2px;top:calc(50% - 1px)}#history>.rule>div{position:relative;background:#fff;padding:0 10px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;min-width:80px;float:right;text-align:right}`,nt=function(t){var e=/\blang(?:uage)?-([\w-]+)\b/i,i=0,n={},s={manual:t.Prism&&t.Prism.manual,disableWorkerMessageHandler:t.Prism&&t.Prism.disableWorkerMessageHandler,util:{encode:function t(e){return e instanceof r?new r(e.type,t(e.content),e.alias):Array.isArray(e)?e.map(t):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(t){return Object.prototype.toString.call(t).slice(8,-1)},objId:function(t){return t.__id||Object.defineProperty(t,"__id",{value:++i}),t.__id},clone:function t(e,i){var n,r;switch(i=i||{},s.util.type(e)){case"Object":if(r=s.util.objId(e),i[r])return i[r];for(var o in n={},i[r]=n,e)e.hasOwnProperty(o)&&(n[o]=t(e[o],i));return n;case"Array":return r=s.util.objId(e),i[r]?i[r]:(n=[],i[r]=n,e.forEach((function(e,s){n[s]=t(e,i)})),n);default:return e}},getLanguage:function(t){for(;t&&!e.test(t.className);)t=t.parentElement;return t?(t.className.match(e)||[,"none"])[1].toLowerCase():"none"},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(n){var t=(/at [^(\r\n]*\((.*):.+:.+\)$/i.exec(n.stack)||[])[1];if(t){var e=document.getElementsByTagName("script");for(var i in e)if(e[i].src==t)return e[i]}return null}},isActive:function(t,e,i){for(var n="no-"+e;t;){var s=t.classList;if(s.contains(e))return!0;if(s.contains(n))return!1;t=t.parentElement}return!!i}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(t,e){var i=s.util.clone(s.languages[t]);for(var n in e)i[n]=e[n];return i},insertBefore:function(t,e,i,n){var r=(n=n||s.languages)[t],o={};for(var a in r)if(r.hasOwnProperty(a)){if(a==e)for(var l in i)i.hasOwnProperty(l)&&(o[l]=i[l]);i.hasOwnProperty(a)||(o[a]=r[a])}var c=n[t];return n[t]=o,s.languages.DFS(s.languages,(function(e,i){i===c&&e!=t&&(this[e]=o)})),o},DFS:function t(e,i,n,r){r=r||{};var o=s.util.objId;for(var a in e)if(e.hasOwnProperty(a)){i.call(e,a,e[a],n||a);var l=e[a],c=s.util.type(l);"Object"!==c||r[o(l)]?"Array"!==c||r[o(l)]||(r[o(l)]=!0,t(l,i,a,r)):(r[o(l)]=!0,t(l,i,null,r))}}},plugins:{},highlightAll:function(t,e){s.highlightAllUnder(document,t,e)},highlightAllUnder:function(t,e,i){var n={callback:i,container:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",n),n.elements=Array.prototype.slice.apply(n.container.querySelectorAll(n.selector)),s.hooks.run("before-all-elements-highlight",n);for(var r,o=0;r=n.elements[o++];)s.highlightElement(r,!0===e,n.callback)},highlightElement:function(i,n,r){var o=s.util.getLanguage(i),a=s.languages[o];i.className=i.className.replace(e,"").replace(/\s+/g," ")+" language-"+o;var l=i.parentElement;l&&"pre"===l.nodeName.toLowerCase()&&(l.className=l.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var c={element:i,language:o,grammar:a,code:i.textContent};function d(t){c.highlightedCode=t,s.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,s.hooks.run("after-highlight",c),s.hooks.run("complete",c),r&&r.call(c.element)}if(s.hooks.run("before-sanity-check",c),(l=c.element.parentElement)&&"pre"===l.nodeName.toLowerCase()&&!l.hasAttribute("tabindex")&&l.setAttribute("tabindex","0"),!c.code)return s.hooks.run("complete",c),void(r&&r.call(c.element));if(s.hooks.run("before-highlight",c),c.grammar)if(n&&t.Worker){var h=new Worker(s.filename);h.onmessage=function(t){d(t.data)},h.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else d(s.highlight(c.code,c.grammar,c.language));else d(s.util.encode(c.code))},highlight:function(t,e,i){var n={code:t,grammar:e,language:i};return s.hooks.run("before-tokenize",n),n.tokens=s.tokenize(n.code,n.grammar),s.hooks.run("after-tokenize",n),r.stringify(s.util.encode(n.tokens),n.language)},tokenize:function(t,e){var i=e.rest;if(i){for(var n in i)e[n]=i[n];delete e.rest}var s=new l;return c(s,s.head,t),a(t,s,e,s.head,0),function(t){var e=[],i=t.head.next;for(;i!==t.tail;)e.push(i.value),i=i.next;return e}(s)},hooks:{all:{},add:function(t,e){var i=s.hooks.all;i[t]=i[t]||[],i[t].push(e)},run:function(t,e){var i=s.hooks.all[t];if(i&&i.length)for(var n,r=0;n=i[r++];)n(e)}},Token:r};function r(t,e,i,n){this.type=t,this.content=e,this.alias=i,this.length=0|(n||"").length}function o(t,e,i,n){t.lastIndex=e;var s=t.exec(i);if(s&&n&&s[1]){var r=s[1].length;s.index+=r,s[0]=s[0].slice(r)}return s}function a(t,e,i,n,l,h){for(var u in i)if(i.hasOwnProperty(u)&&i[u]){var p=i[u];p=Array.isArray(p)?p:[p];for(var g=0;g<p.length;++g){if(h&&h.cause==u+","+g)return;var f=p[g],v=f.inside,m=!!f.lookbehind,b=!!f.greedy,y=f.alias;if(b&&!f.pattern.global){var x=f.pattern.toString().match(/[imsuy]*$/)[0];f.pattern=RegExp(f.pattern.source,x+"g")}for(var w=f.pattern||f,k=n.next,S=l;k!==e.tail&&!(h&&S>=h.reach);S+=k.value.length,k=k.next){var A=k.value;if(e.length>t.length)return;if(!(A instanceof r)){var $,C=1;if(b){if(!($=o(w,S,t,m)))break;var F=$.index,E=$.index+$[0].length,T=S;for(T+=k.value.length;F>=T;)T+=(k=k.next).value.length;if(S=T-=k.value.length,k.value instanceof r)continue;for(var _=k;_!==e.tail&&(T<E||"string"==typeof _.value);_=_.next)C++,T+=_.value.length;C--,A=t.slice(S,T),$.index-=S}else if(!($=o(w,0,A,m)))continue;F=$.index;var P=$[0],z=A.slice(0,F),O=A.slice(F+P.length),U=S+A.length;h&&U>h.reach&&(h.reach=U);var H=k.prev;if(z&&(H=c(e,H,z),S+=z.length),d(e,H,C),k=c(e,H,new r(u,v?s.tokenize(P,v):P,y,P)),O&&c(e,k,O),C>1){var R={cause:u+","+g,reach:U};a(t,e,i,k.prev,S,R),h&&R.reach>h.reach&&(h.reach=R.reach)}}}}}}function l(){var t={value:null,prev:null,next:null},e={value:null,prev:t,next:null};t.next=e,this.head=t,this.tail=e,this.length=0}function c(t,e,i){var n=e.next,s={value:i,prev:e,next:n};return e.next=s,n.prev=s,t.length++,s}function d(t,e,i){for(var n=e.next,s=0;s<i&&n!==t.tail;s++)n=n.next;e.next=n,n.prev=e,t.length-=s}if(t.Prism=s,r.stringify=function t(e,i){if("string"==typeof e)return e;if(Array.isArray(e)){var n="";return e.forEach((function(e){n+=t(e,i)})),n}var r={type:e.type,content:t(e.content,i),tag:"span",classes:["token",e.type],attributes:{},language:i},o=e.alias;o&&(Array.isArray(o)?Array.prototype.push.apply(r.classes,o):r.classes.push(o)),s.hooks.run("wrap",r);var a="";for(var l in r.attributes)a+=" "+l+'="'+(r.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'"'+a+">"+r.content+"</"+r.tag+">"},!t.document)return t.addEventListener?(s.disableWorkerMessageHandler||t.addEventListener("message",(function(e){var i=JSON.parse(e.data),n=i.language,r=i.code,o=i.immediateClose;t.postMessage(s.highlight(r,s.languages[n],n)),o&&t.close()}),!1),s):s;var h=s.util.currentScript();function u(){s.manual||s.highlightAll()}if(h&&(s.filename=h.src,h.hasAttribute("data-manual")&&(s.manual=!0)),!s.manual){var p=document.readyState;"loading"===p||"interactive"===p&&h&&h.defer?document.addEventListener("DOMContentLoaded",u):window.requestAnimationFrame?window.requestAnimationFrame(u):window.setTimeout(u,16)}return s}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});"undefined"!=typeof module&&module.exports&&(module.exports=nt),"undefined"!=typeof global&&(global.Prism=nt),nt.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/,name:/[^\s<>'"]+/}},cdata:/<!\[CDATA\[[\s\S]*?\]\]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},nt.languages.markup.tag.inside["attr-value"].inside.entity=nt.languages.markup.entity,nt.languages.markup.doctype.inside["internal-subset"].inside=nt.languages.markup,nt.hooks.add("wrap",(function(t){"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))})),Object.defineProperty(nt.languages.markup.tag,"addInlined",{value:function(t,e){var i={};i["language-"+e]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:nt.languages[e]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var n={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};n["language-"+e]={pattern:/[\s\S]+/,inside:nt.languages[e]};var s={};s[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return t})),"i"),lookbehind:!0,greedy:!0,inside:n},nt.languages.insertBefore("markup","cdata",s)}}),Object.defineProperty(nt.languages.markup.tag,"addAttribute",{value:function(t,e){nt.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+t+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[e,"language-"+e],inside:nt.languages[e]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),nt.languages.html=nt.languages.markup,nt.languages.mathml=nt.languages.markup,nt.languages.svg=nt.languages.markup,nt.languages.xml=nt.languages.extend("markup",{}),nt.languages.ssml=nt.languages.xml,nt.languages.atom=nt.languages.xml,nt.languages.rss=nt.languages.xml,function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var i=t.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(nt),nt.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},nt.languages.javascript=nt.languages.extend("clike",{"class-name":[nt.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),nt.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,nt.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:nt.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:nt.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:nt.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:nt.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:nt.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),nt.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:nt.languages.javascript}},string:/[\s\S]+/}}}),nt.languages.markup&&(nt.languages.markup.tag.addInlined("script","javascript"),nt.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),nt.languages.js=nt.languages.javascript,function(){if(void 0!==nt&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var t={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},e="data-src-status",i="loading",n="loaded",s='pre[data-src]:not([data-src-status="loaded"]):not([data-src-status="loading"])',r=/\blang(?:uage)?-([\w-]+)\b/i;nt.hooks.add("before-highlightall",(function(t){t.selector+=", "+s})),nt.hooks.add("before-sanity-check",(function(r){var o=r.element;if(o.matches(s)){r.code="",o.setAttribute(e,i);var l=o.appendChild(document.createElement("CODE"));l.textContent="Loading…";var c=o.getAttribute("data-src"),d=r.language;if("none"===d){var h=(/\.(\w+)$/.exec(c)||[,"none"])[1];d=t[h]||h}a(l,d),a(o,d);var u=nt.plugins.autoloader;u&&u.loadLanguages(d);var p=new XMLHttpRequest;p.open("GET",c,!0),p.onreadystatechange=function(){var t,i;4==p.readyState&&(p.status<400&&p.responseText?(o.setAttribute(e,n),l.textContent=p.responseText,nt.highlightElement(l)):(o.setAttribute(e,"failed"),p.status>=400?l.textContent=(t=p.status,i=p.statusText,"✖ Error "+t+" while fetching file: "+i):l.textContent="✖ Error: File does not exist or is empty"))},p.send(null)}})),nt.plugins.fileHighlight={highlight:function(t){for(var e,i=(t||document).querySelectorAll(s),n=0;e=i[n++];)nt.highlightElement(e)}};var o=!1;nt.fileHighlight=function(){o||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),o=!0),nt.plugins.fileHighlight.highlight.apply(this,arguments)}}function a(t,e){var i=t.className;i=i.replace(r," ")+" language-"+e,t.className=i.replace(/\s+/g," ").trim()}}();var st=r`:host{display:block;width:100%;--font-family:monospace;--font-size:12pt;--line-height:14pt;--lines-width:40px;--editor-bg-color:#fff;--editor-text-color:#000;--editor-caret-color:var(--editor-text-color);--editor-sel-color:#b9ecff;--lines-bg-color:#eee;--lines-text-color:#000;--scroll-track-color:#aaa;--scroll-thumb-color:#eee;--hl-color-string:#00ae22;--hl-color-function:#004eff;--hl-color-number:#dd9031;--hl-color-operator:#5a5a5a;--hl-color-class-name:#3cabb6;--hl-color-punctuation:#4a4a4a;--hl-color-keyword:#8500ff;--hl-color-comment:#aaa;--hl-color-tag:#3a9bca;--hl-color-selector:#3a9bca;--hl-color-property:#713aca}.litcode,:host{height:100%;max-height:inherit;max-width:inherit}.litcode{border-radius:inherit;overflow:auto;display:grid;grid-template-columns:var(--lines-width) auto;position:relative;line-height:var(--line-height);font-family:var(--font-family);font-size:var(--font-size)}.litcode :is(.litcode_textarea,.litcode_highlight){grid-column:1/3;grid-row:1;box-sizing:border-box;height:100%;width:100%;height:calc(var(--height) + 100% - var(--line-height)*4)}.litcode .litcode_linenumbers~:is(.litcode_textarea,.litcode_highlight){grid-column:2;grid-row:1}.litcode :is(.litcode_textarea,.litcode_linenumbers,.litcode_highlight){padding:4px}.litcode .litcode_linenumbers{position:sticky;left:0;padding-right:1px;text-align:right;background-color:var(--lines-bg-color);color:var(--lines-text-color);height:100%;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.litcode .litcode_textarea{font:inherit;resize:none;border:none;outline:none;margin:0;white-space:pre;color:transparent;height:100%;caret-color:var(--editor-caret-color);background-color:var(--editor-bg-color)}.litcode .litcode_textarea::-moz-selection{background-color:var(--editor-sel-color)}.litcode .litcode_textarea::selection{background-color:var(--editor-sel-color)}.litcode .litcode_highlight{width:100%;height:100%;color:var(--editor-text-color);pointer-events:none}.litcode .litcode_highlight>pre{margin:0}.litcode::-webkit-scrollbar{width:10px;height:10px}.litcode::-webkit-scrollbar-track{background-color:var(--scroll-track-color);border-radius:8px}.litcode::-webkit-scrollbar-thumb{background-color:var(--scroll-thumb-color);border-radius:8px}.litcode::-webkit-scrollbar-corner{background-color:var(--scroll-track-color)}.litcode[default] .token.string{color:var(--hl-color-string)}.litcode[default] .token.function{color:var(--hl-color-function)}.litcode[default] .token.number{color:var(--hl-color-number)}.litcode[default] .token.operator{color:var(--hl-color-operator)}.litcode[default] .token.class-name{color:var(--hl-color-class-name)}.litcode[default] .token.punctuation{color:var(--hl-color-punctuation)}.litcode[default] .token.keyword{color:var(--hl-color-keyword)}.litcode[default] .token.comment{color:var(--hl-color-comment)}.litcode[default] .token.tag{color:var(--hl-color-tag)}.litcode[default] .token.selector{color:var(--hl-color-selector)}.litcode[default] .token.property{color:var(--hl-color-property)}`;const rt="undefined"!=typeof Prism;function ot(t){return"string"==typeof t?H`${t}`:H`<span class="token ${t.type} ${t.alias}">${Array.isArray(t.content)?t.content.map(ot):H`${t.content}`}</span>`}customElements.define("lit-code",class extends et{static get styles(){return st}static get properties(){return{code:{type:String},grammar:{type:Object},language:{type:String},noshadow:{attribute:!0},linenumbers:{attribute:!0}}}get shadowDom(){return!this.hasAttribute("noshadow")}constructor(){super(),this.opening=["(","{","[","'",'"'],this.closing=[")","}","]","'",'"'],this.code="",this.indent="  ",this.language="clike",rt&&(this.grammar=Prism.languages[this.language])}update(t){if(super.update(t),rt&&t.has("language")){const t=Prism.languages[this.language.toLowerCase()];if(void 0===t)throw new Error("Unsupported Prism language");this.grammar=t}}_getElement(t){return this.shadowDom?this.shadowRoot.querySelector(`.litcode_${t}`):this.querySelector(`.litcode_${t}`)}firstUpdated(){this.elTextarea=this._getElement("textarea"),this.elContainer=this._getElement("litcode"),this.updateTextarea()}render(){return H` ${this.shadowDom?H``:H`<style>${st.cssText}</style>`} <div class="litcode litcode_litcode" ?default="${!this.hasAttribute("mycolors")}"> ${this.hasAttribute("linenumbers")?H` <div class="litcode_linenumbers"> <div class="litcode_line">1</div> ${(this.code.match(/\r?\n/g)||[]).map(((t,e)=>H` <div class="litcode_line">${e+2}</div> `))} </div> `:H``} <textarea class="litcode_textarea" spellcheck="false" @keydown="${this.handleKeys}" @input="${this.handleInput}"></textarea> <code class="litcode_highlight"><pre>${rt?Prism.tokenize(this.code,this.grammar).map(ot):H`${this.code}`}</pre></code> </div> `}setCode(t){this.code=t,this.updateTextarea()}getCode(){return this.code}createRenderRoot(){return this.shadowDom?super.createRenderRoot():this}setCursor(t){this.elTextarea.setSelectionRange(t,t)}setSelect(t,e){this.elTextarea.setSelectionRange(t,e)}getCurrentLineIndent(){const t=this.elTextarea.selectionStart,e=this.elTextarea.selectionEnd,i=this.code.lastIndexOf("\n",t-1)+1,n=(()=>{let t=i;for(;" "===this.code[t]&&t<e;)t++;return t-i})();return" ".repeat(n)}updateTextarea(){this.elTextarea&&(this.elTextarea.value=this.code,this.dispatchEvent(new CustomEvent("update",{detail:this.code})))}insertCode(t,e,i=!0){this.code=this.code.substring(0,t)+e+this.code.substring(t),this.updateTextarea(),i&&this.setCursor(t+e.length)}replaceCode(t,e,i="",n=!0){this.code=this.code.substring(0,t)+i+this.code.substring(e),this.updateTextarea(),n&&this.setCursor(t+i.length)}handleKeys(t){switch(t.code){case"Tab":this.handleTabs(t);break;case"Enter":this.handleNewLine(t);break;case"Backspace":this.handleBackspace(t);break;default:this.opening.includes(t.key)?this.handleAutoClose(t):this.closing.includes(t.key)&&this.handleAutoSkip(t)}}handleInput({target:t}){this.code=t.value,this.dispatchEvent(new CustomEvent("update",{detail:this.code}))}handleTabs(t){t.preventDefault();const e=this.elTextarea.selectionStart,i=this.elTextarea.selectionEnd;if(e!==i){const n=Math.max(0,this.code.lastIndexOf("\n",e-1)),s=Math.max(this.code.indexOf("\n",i),i);let r=0,o=this.code.substring(n,s),a=this.indent.length;0===n&&(o="\n"+o),t.shiftKey?(a=-a,r=(o.match(new RegExp("\n"+this.indent,"g"))||[]).length,o=o.replaceAll("\n"+this.indent,"\n")):(r=(o.match(/\n/g)||[]).length,o=o.replaceAll("\n","\n"+this.indent)),0===n&&(o=o.replace(/^\n/,"")),this.replaceCode(n,s,o,!1);const l=Math.max(n+1,e+a),c=i+r*a;this.setSelect(l,c)}else this.insertCode(e,this.indent,!0)}handleBackspace(t){const e=this.elTextarea.selectionStart,i=this.elTextarea.selectionEnd;if(t.ctrlKey||e!==i)return;t.preventDefault();const n=this.code[e-1],s=this.code[e],r=this.opening.includes(n)&&this.closing.includes(s),o=this.closing[this.opening.indexOf(n)]===s;if(r&&o)this.replaceCode(e-1,e+1);else{const t=e-this.indent.length,i=e;this.code.substring(t,i)===this.indent?this.replaceCode(t,i):this.replaceCode(e-1,e)}}handleAutoClose(t){const e=this.elTextarea.selectionStart,i=this.elTextarea.selectionEnd;if("'"===this.code[e]||'"'===this.code[e])return this.handleAutoSkip(t);if(t.preventDefault(),e===i){const i=t.key,n=this.closing[this.opening.indexOf(i)];if("{"!==i||"\n"!==this.code[e]&&this.code.length!==e)this.insertCode(e,i+n),this.setCursor(e+1);else{const t="\n"+this.getCurrentLineIndent();this.insertCode(e,i+t+this.indent+t+n),this.setCursor(e+t.length+this.indent.length+1)}}}handleAutoSkip(t){const e=this.elTextarea.selectionStart;this.code[e]===t.key&&(t.preventDefault(),this.setCursor(e+1))}handleNewLine(t){t.preventDefault(),this.insertCode(this.elTextarea.selectionStart,"\n"+this.getCurrentLineIndent()),this.elTextarea.selectionStart===this.code.length&&(this.elContainer.scrollTop=this.elContainer.scrollHeight)}});const at="*a -> A\n*b -> B\nAa -> aA\nAb -> bA\nBa -> aB\nBb -> bB\nA |-> a\nB |-> b\n* |-> \n -> *";class lt extends et{static styles=[it];static properties={input:{type:String},history:{type:Array},running:{type:Boolean}};constructor(){super(),this.history=[{}],this.lines=[],this.curStep=0,this.input=localStorage.getItem("input"),null===this.input&&(this.input="abbaba"),this.lastUnmodifedInput=this.input,this.rawCode=localStorage.getItem("code"),null===this.rawCode&&(this.rawCode=at),this.reset(),this.shortcuts={Digit1:this.step,Digit2:this.play,Digit3:this.reset,Digit9:()=>{this.codeUpdate({detail:at})}},window.addEventListener("keydown",(t=>{t.ctrlKey&&void 0!==this.shortcuts[t.code]&&(t.preventDefault(),this.shortcuts[t.code].bind(this)())})),Prism.languages.markov={operator:/(?:->|\|->|=>)/}}firstUpdated(){this.editor=this.shadowRoot.getElementById("editor"),this._lineHl=this.shadowRoot.getElementById("current-rule")}render(){return H` <div id="editor-wrap"> <lit-code id="editor" language="markov" code="${this.rawCode}" @update="${this.codeUpdate}" linenumbers ?running="${this.running}" ?completed="${this.needReset}"></lit-code> <div id="current-rule"></div> </div> <div id="controls"> <input type="text" spellcheck="false" id="string" .value="${this.input}" placeholder="Enter something" @input="${this.inputUpdate}" ?disabled="${this.running}"> <div id="buttons"> <button id="step" @click="${this.step}">Step</button> <button id="play" @click="${this.play}">Play</button> <button id="reset" @click="${this.hardReset}">Reset</button> </div> </div> <div id="history" ?completed="${this.needReset}"> <div id="terminated">S T O P</div> ${this.history.map(((t,e)=>H` <div class="line">${e}</div> <div class="change">${t.change}</div> ${e>0?H` <div class="empty-line"></div> <div class="rule"> <hr> <div>${t.rule}</div> </div> `:H``} `)).reverse()} </div> `}setLineHighlite(t){const e=this.editor.elTextarea,i=this.editor.elContainer,[n]=document.defaultView.getComputedStyle(i).getPropertyValue("line-height").split("px"),s=t*n;(s-i.scrollTop>this.editor.clientHeight||s<i.scrollTop)&&(i.scrollTop=s);const r=e.offsetHeight-this.editor.clientHeight,o=(r&&s>r?-7:4)+(t-Math.floor(i.scrollTop/n))*n;this._lineHl.style.top=`${o}px`}play(){this.running=!0;let t=0;for(;t<1e3&&this.step();)t++;1e3===t&&console.log("Too many operations!"),this.running=!1,this.needReset=!0}step(t=!0){if(this.needReset)return this.reset(),!0;this.running=!0;let e=0,i=!0,n=!1,s="";for(;i&&e<this.code.length;){if(s=this.code[e].replace(/ +/g,""),0===s.length){e++;continue}let[t,r]=s.split("|->");n=void 0!==r,n||([t,r]=s.split("=>"),n=void 0!==r),n||([t,r]=s.split("->")),this.input.includes(t)&&(this.input=this.input.replace(t,r),i=!1),e++}return t&&this.setLineHighlite(e-1),s=this.code[e-1].replace(/(?:\|->|=>)/,"↦"),s=s.replace("->","→"),this.history.push({change:this.input,rule:s}),!i&&!n||(this.running=!1,this.needReset=!0,!1)}hardReset(){this.input=this.lastUnmodifedInput,this.reset()}reset(){this.lastUnmodifedInput=this.input,this.history=[{change:this.input,rule:" "}],this.running=!1,this.needReset=!1}inputUpdate({target:t}){this.input=t.value,this.history=[{change:this.input,rule:" "}],localStorage.setItem("input",this.input)}codeUpdate({detail:t}){this.code=t.split("\n"),localStorage.setItem("code",t)}}customElements.define("markov-emulator",lt)}));
